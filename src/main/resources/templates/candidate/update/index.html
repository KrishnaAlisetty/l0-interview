<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>Title</title>
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
            crossorigin="anonymous"
        />
        <style>
            .form-container {
                background: #ffffff;
                padding: 25px 30px;
                width: 800px;
                border-radius: 8px;
                box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            }
            body {
                height: 100vh;
                margin: 0;
                display: flex;
                justify-content: center;
                align-items: center;
                font-family: Arial, sans-serif;
                background-color: #f5f5f5;
            }
            .title {
                text-align: center;
            }
        </style>
    </head>
    <body>
        <form id="loginForm" class="form-container">
            <div class="row mb-2">
                <h3 class="form-title h2">Update Candidate Details</h3>
            </div>
            <div class="row mb-3">
                <div class="col">
                    <label for="formFile" class="form-label"
                        >Upload Candidate Resume</label
                    >
                    <input class="form-control" type="file" id="formFile" />
                </div>
                <div class="col">
                    <label for="scheduler" class="form-label"
                        >Schedule Interview</label
                    >
                    <input
                        class="form-control"
                        type="datetime-local"
                        id="scheduler"
                    />
                </div>
            </div>

            <div class="row mb-3">
                <div class="col">
                    <input
                        type="text"
                        class="form-control"
                        placeholder="Candidate Name"
                        aria-label="Candidate Name"
                        id="cName"
                    />
                </div>
                <div class="col">
                    <input
                        type="text"
                        class="form-control"
                        placeholder="Candidate Email"
                        aria-label="Candidate Email"
                        id="cEmail"
                    />
                </div>
            </div>
            <div class="row mb-3">
                <div class="col">
                    <input
                        type="text"
                        class="form-control"
                        placeholder="Interviewer Name"
                        aria-label="Interviewer Name"
                        id="iName"
                    />
                </div>
                <div class="col">
                    <input
                        type="text"
                        class="form-control"
                        placeholder="Interviewer Email"
                        aria-label="Interviewer Email"
                        id="iEmail"
                    />
                </div>
            </div>
            <div
                style="
                    display: flex;
                    justify-content: center;
                    align-items: center;
                "
            >
                <button type="submit" class="btn btn-primary btn-md">
                    Update
                </button>
            </div>
        </form>

        <script>
            document.getElementById("loginForm").onsubmit = async (e) => {
                e.preventDefault();

                const cName = document.getElementById("cName").value;
                const cEmail = document.getElementById("cEmail").value;
                const iName = document.getElementById("iName").value;
                const iEmail = document.getElementById("iEmail").value;
                const scheduleTime = document.getElementById("scheduler").value;
                const file = document.getElementById("formFile").files[0];

                const uploadDetails = new FormData();

                // must match DTO field names exactly
                uploadDetails.append("file", file);
                uploadDetails.append("candidateName", cName);
                uploadDetails.append("candidateEmail", cEmail);
                uploadDetails.append("interviewerName", iName);
                uploadDetails.append("interviewerEmail", iEmail);
                uploadDetails.append("scheduleTime", scheduleTime);
                uploadDetails.append(
                    "timeZone",
                    Intl.DateTimeFormat().resolvedOptions().timeZone,
                );

                const res = await fetch("/update/interviewinfo", {
                    method: "POST",
                    body: uploadDetails,
                });

                const data = await res.json();

                console.log(data);
            };
        </script>
    </body>
</html>
